@(title: String)

<section class="page">
    <accordion close-others="false">
        <p class="size-h3" i18n="@title"></p>
        <div class="form-horizontal">

            <div class="panel panel-default">
                <div class="panel-heading"><strong><span class="glyphicon glyphicon-th"></span> <span data-i18n="Details"></span></strong></div>
                <div class="panel-body">
                    <div class="col-md-9">
                        <div class="form-group">
                            <label for="productSku" class="col-sm-2 control-label" i18n="Bar Code"></label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control" id="productSku" ng-model="product.sku" i18n="i18n-placeholder" placeholder="Product SKU or Bar Code" autofocus>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="productName" class="col-sm-2 control-label" i18n="Name"></label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control" id="productName" ng-model="product.name" i18n="i18n-placeholder" placeholder="Product Name">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label" for="productBrand" i18n="Brand"></label>
                            <div class="col-sm-7 col-xs-12">
                                <div class="c-row-group">
                                    <ui-select ng-model="product.brand" id="productBrand"
                                    theme="bootstrap"
                                    on-select="brandSelected($select)"
                                    reset-search-input="false" class="c-row-group-element-main c-short-padding-right">
                                        <ui-select-match allow-clear placeholder="Select Brand...">
                                            {{$select.selected.name}}</ui-select-match>
                                        <ui-select-choices repeat="brand in brands | filter: $select.search"
                                        refresh="refreshBrands($select.search)"
                                        refresh-delay="0" first-item-active="false" >
                                            <div ng-bind-html="brand.name | highlight: $select.search"></div>
                                        </ui-select-choices>
                                    </ui-select>
                                    <div class="c-short-padding-left">
                                        <button class="btn btn-default c-row-group-element" ng-click="addBrand()"><span class="glyphicon glyphicon-plus"></span></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label" for="productTags" i18n="Tags"></label>
                            <div class="col-sm-7">
                                <tags-input ng-model="product.tags" display-property="name" key-property="id" replace-spaces-with-dashes="false" class="ui-tags-input" id="productTags" on-tag-adding="handleAddingTag($tag)" placeholder="...">
                                    <auto-complete source="loadTags($query)" min-length="0" load-on-focus="true"
                                    load-on-empty="false" max-results-to-show="32"></auto-complete>
                                </tags-input>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <accordion-group is-open="pricing.open" ng-init="pricing.open=true">
                <accordion-heading>
                    <strong><span class="glyphicon glyphicon-th"></span>  <span data-i18n="Pricing"></span></strong><i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': pricing.open, 'glyphicon-chevron-right': !pricing.open}"></i>
                </accordion-heading>

                <div class="form-group">
                    <div class="col-xs-10 col-xs-offset-1">
                        <div class="well bg-reverse">
                            <div class="row">
                                <div class="col-sm-4">
                                    <label class="control-label" for="productMarkup"><span i18n="Cost"></span>&nbsp;&nbsp;<small i18n="(No Taxes)" class="c-label-subscript"></small></label>
                                    <div class="input-group">
                                        <span class="input-group-addon">$</span>
                                        <input id="productCost" class="form-control" type="text" ng-model="product.cost" money ngMaxlength="17" interpret="true">
                                    </div>
                                </div>

                                <div class="col-sm-4">
                                    <label class="control-label" for="productMarkup" i18n="Markup"></label>
                                    <div class="input-group">
                                        <input id="productMarkup" class="form-control" type="text" ng-model="product.markup" money mgMaxlength="8" precision="2">
                                        <span class="input-group-addon">%</span>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <label class="control-label" for="productMarkup"><span i18n="Price"></span>&nbsp;&nbsp;<small i18n="(No Taxes)" class="c-label-subscript"></small></label>
                                    <div class="input-group">
                                        <span class="input-group-addon">$</span>
                                        <input id="productMarkup" class="form-control" type="text" ng-model="product.price" money mgMaxlength="8">
                                    </div>
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="col-sm-4 col-sm-offset-4">
                                    <label class="control-label" for="productTax" i18n="Tax"></label>
                                    <ui-select ng-model="product.tax" id="productTax"
                                    theme="bootstrap" on-select="taxSelected($select)">
                                        <ui-select-match placeholder="Select Tax...">
                                            {{$select.selected.name}} ({{$select.selected.percentage}}%)</ui-select-match>
                                        <ui-select-choices repeat="tax in taxes track by $index">
                                            <span ng-bind-html="tax.name"></span><span ng-if="tax.id != null" ng-bind-html="' (' + tax.percentage + '%)'"></span>
                                        </ui-select-choices>
                                    </ui-select>
                                </div>
                                <div class="col-md-4">
                                    <label class="control-label" for="retailPrice"><span i18n="Total Price"></span>&nbsp;&nbsp;<small i18n="(After Taxes)" class="c-label-subscript"></small></label>
                                    <div class="input-group">
                                        <span class="input-group-addon">$</span>
                                        <input id="retailPrice" class="form-control" type="text" ng-model="product.retailPrice" money mgMaxlength="8">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </accordion-group>

            <accordion-group is-open="inventory.open" ng-init="inventory.open=true">
                <accordion-heading>
                    <strong><span class="glyphicon glyphicon-th"></span>  <span data-i18n="Inventory"></span></strong><i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': inventory.open, 'glyphicon-chevron-right': !inventory.open}"></i>
                </accordion-heading>

                <div class="ui-tab-container ui-tab-reverse">
                    <tabset class="ui-tab">
                        <tab>
                            <tab-heading i18n="Standard"></tab-heading>
                            <div class="row">
                                <div class="col-md-5">
                                    <div class="c-section-header">
                                        <span class="c-legend">Track Stock</span>
                                        <div class="space"></div>
                                        <checkbox ng-model="product.trackStock" class="btn-primary btn-gap-v"></checkbox>
                                    </div>
                                    <div class="form-group">
                                        <div class="col-sm-10 col-sm-offset-1">
                                            <div class="col-xs-4">
                                                <label class="control-label" for="stockCount" i18n="In Stock"></label>
                                                <input id="stockCount" class="form-control" type="number" ng-model="product.stock.count" min="0" ng-disabled="!product.trackStock">
                                            </div>
                                            <div class="col-xs-2 col-xs-offset-1">
                                                <label class="control-label" for="" i18n="Alert"></label>
                                                <div class="input-group media-middle">
                                                    <checkbox ng-model="product.alertStockLowLevel" large class="btn-default btn-gap-v btn-round c-btn-bg-default" ng-disabled="!product.trackStock"></checkbox>
                                                </div>
                                            </div>
                                            <div class="col-xs-4 col-xs-offset-1">
                                                <label class="control-label" for="alertLevel" i18n="Alert at"></label>
                                                <input id="alertLevel" class="form-control" type="number" ng-model="product.stockAlertLevel" min="0" ng-disabled="!product.alertStockLowLevel || !product.trackStock">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 col-md-offset-1">
                                    <div class="c-section-header">
                                        <span class="c-legend" i18n="Fractions"></span>
                                        <div class="space"></div>
                                        <button class="btn btn-xs btn-gap-v btn-round btn-info" ng-click="addFraction()"><span class="glyphicon glyphicon-plus"></span> <span data-i18n="Add"></span></button>
                                    </div>
                                    <div class="form-group">
                                        <div class="row c-margin-bottom-sm" ng-repeat="fraction in product.fractions track by $index">
                                            <div class="col-sm-4">
                                                <label ng-if="$index==0" class="control-label" for="fractionName" i18n="Name"></label>
                                                <input type="text" class="form-control" id="fractionName" i18n="i18n-placeholder" placeholder="Name" ng-model="fraction.name">
                                            </div>
                                            <div class="col-sm-2">
                                                <label ng-if="$index==0" class="control-label" for="fractionProportion" i18n="Qty."></label>
                                                <input id="fractionProportion" class="form-control" type="text" money mgMaxlength="6" ng-model="fraction.qty" ng-disabled="$index==0" i18n="i18n-placeholder" placeholder="Eg. 0.25">
                                            </div>
                                            <div class="col-sm-3">
                                                <label ng-if="$index==0" class="control-label" for="fractionPrice" i18n="Price"></label>
                                                <input id="fractionPrice" class="form-control" type="text" money mgMaxlength="8" ng-model="fraction.price" ng-disabled="$index==0" i18n="i18n-placeholder" placeholder="Retail price">
                                            </div>
                                            <div class="col-sm-3">
                                                <label ng-if="$index==0" class="control-label" for="fractionSku" i18n="SKU"></label>

                                                <div class="row">
                                                    <div class="col-xs-9">
                                                        <input type="text" class="form-control" id="fractionSku" ng-model="fraction.sku" ng-disabled="$index==0" i18n="i18n-placeholder" placeholder="SKU">
                                                    </div>
                                                    <div class="col-xs-1 c-no-padding-left">
                                                        <a href="javascript:;" class="btn-icon btn-icon-round btn-icon-sm bg-danger" ng-show="$index>0" ng-click="removeFraction($index)"><i class="fa fa-remove"></i></a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                        </tab>
                        <tab disabled="true">
                            <tab-heading i18n="Composite"></tab-heading>

                        </tab>
                    </tabset>
                </div>
            </accordion-group>

            <button type="submit" class="btn btn-primary">Submit</button>
        </div>
    </accordion>
</section>

<script type="text/ng-template" id="addBrandModal.html">
<div class="modal-header">
<h3>Add Brand!</h3>
</div>
<div class="modal-body">
    <div ng-hide="showInput">
        <span i18n="Do you want to create a new brand called:"></span> &nbsp; <strong>{{ newBrandName }}</strong> <span>?</span>
    </div>
    <div ng-show="showInput">
    <form class="form-horizontal" role="form">
        <div class="form-group">
            <div class="col-xs-8">
                <label class="control-label" for="newBrand" i18n="Brand Name"></label>
                <input id="newBrand" class="form-control" type="text" ng-model="newBrandName" min="1" ng-change="inputChange()" autofocus>
            </div>
        </div>
    </form>
    </div>
</div>
<div class="modal-footer">
<button class="btn btn-info" ng-click="ok()" i18n="Add" ng-disabled="disableSave" accesskey="A"></button>
<button class="btn btn-warning" ng-click="cancel()" i18n="Cancel"></button>
</div>
</script>

<script type="text/ng-template" id="addTaxModal.html">
    <div class="modal-header">
        <h3 i18n="Add Tax"></h3>
    </div>
    <div class="modal-body">
        <form class="form-horizontal" role="form">
            <div class="row">
                <div class="col-sm-5 col-sm-offset-1">
                    <label class="control-label" for="newTax" i18n="Name"></label>
                    <input id="newTax" class="form-control" type="text" ng-model="newTax.name" min="1" ng-change="inputChange()" focus-here>
                </div>
                <div class="col-sm-3 col-sm-offset-1">
                    <label class="control-label" for="newTaxPercentage" i18n="Percentage"></label>
                    <input id="newTaxPercentage" class="form-control" type="text" ng-model="newTax.percentage" money mgMaxlength="8" precision="2">
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button class="btn btn-info" ng-click="ok()" i18n="Add" ng-disabled="disableSave" accesskey="A"></button>
        <button class="btn btn-warning" ng-click="cancel()" i18n="Cancel"></button>
    </div>
</script>
